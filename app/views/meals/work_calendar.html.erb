<% content_for(:title){ "Work Calendar" } %>

<table class="index">
  <tr>
    <th class="col-md-2">Date/Time</th>
    <th class="col-md-1">Location</th>
    <th class="col-md-3">Title</th>
    <th class="col-md-2">Head Cook</th>
    <th class="col-md-2">Assistant Cooks</th>
    <th class="col-md-2">Cleaners</th>
    <th></th>
  </tr>
  <% @meals.each do |meal| %>
    <tr class="<%= signed_up_class(meal) %>">
      <td class="col-md-2">
        <span class="date"><%= meal.served_at.to_formatted_s(:short_date) %></span>
        <span class="time"><%= meal.served_at.to_formatted_s(:regular_time) %></span>
      </td>
      <td class="col-md-1"><%= meal.location_abbrv %></td>
      <td class="col-md-3"><%= render("meal_link", meal: meal) %></td>
      <td class="col-md-2"><%= user_link(meal.head_cook) %></td>
      <td class="col-md-2"><%= meal.asst_cooks.map{ |c| user_link(c) }.reduce(:<<) %></td>
      <td class="col-md-2"><%= meal.cleaners.map{ |c| user_link(c) }.reduce(:<<) %></td>
      <td></td>
    </tr>
  <% end %>
</table>

<%= paginate @meals %>
