<% content_for(:title){ "Users" } %>

<div class="top-buttons">
  <%= link_to("Invite Users", invite_users_path, class: "btn btn-default") if can?(:create, User) %>
  <%= link_to("Create User", new_user_path, class: "btn btn-primary") if can?(:create, User) %>
</div>

<table class="index">
  <tr>
    <th class="col-md-2">Name</th>
    <th class="col-md-2">Household</th>
    <th class="col-md-2">Google ID</th>
    <th class="col-md-2">Contact Email</th>
    <th class="col-md-3">Phone</th>
    <th class="col-md-1"></th>
  </tr>
  <% @users.each do |user| %>
    <tr class="<%= user.deleted? ? "deleted" : "" %>">
      <td class="col-md-2">
        <%= link_to(user.name, edit_user_path(user)) %>
        <%= icon_tag('trophy') if user.admin? %>
      </td>
      <td class="col-md-2"><%= user.household_full_name %></td>
      <td class="col-md-2"><%= link_to(user.google_email, "mailto:#{user.google_email}") %></td>
      <td class="col-md-2"><%= link_to(user.email, "mailto:#{user.email}") %></td>
      <td class="col-md-3"><%= user.phones %></td>
      <td class="col-md-1">
        <% if can?(:update, user) %>
          <%= link_to(icon_tag('pencil'), edit_user_path(user)) %>
        <% end %>
        <% if can?(:destroy, user) && !user.deleted? %>
          <%= link_to(icon_tag('trash'), user_path(user), method: :delete) %>
        <% end %>
      </td>
    </tr>
  <% end %>
</table>
